<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js');
      } else {
        console.error('Service workers are not supported.');
      }
    </script>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="/style.css">
    <script src="/script.js" defer></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LM0N81BEJM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-LM0N81BEJM');
</script>
	</head>
	
<body>
    <div class="jumbotron">
      <h1 class="display-4">Geolocation PoC</h1>
      <p class="lead">Click "Allow" to access your location.</p>
      <p class="lead">Click "Your Location" link to view location on Google Maps</p>
      <p class="lead">(Download area first in Google Maps if testing offline)</p>

<script>
    if ("geolocation" in navigator) {
      /* geolocation is available */
      navigator.geolocation.getCurrentPosition(function(position, showError) {
        console.log(position)
        var lat = position.coords.latitude;
        var lng = position.coords.longitude;
        // document.write("Your location: https://maps.google.com/?q= " + lat + "," + lng)
        
              var a = document.createElement('a');
      var linkText = document.createTextNode("Your Location: "   + lat + "," + lng);
      a.appendChild(linkText);
      a.title = "Your Location: ";
      a.href = "https://maps.google.com/?q= " + lat + "," + lng;
      document.body.appendChild(a);
    
      })
    } else {
       alert("Geolocation not enabled.");
      /* geolocation IS NOT available */
    }
  
  function showError(error) {
  switch(error.code) {
    case error.PERMISSION_DENIED:
      x.innerHTML = "User denied the request for Geolocation."
      break;
    case error.POSITION_UNAVAILABLE:
      x.innerHTML = "Location information is unavailable."
      break;
    case error.TIMEOUT:
      x.innerHTML = "The request to get user location timed out."
      break;
    case error.UNKNOWN_ERROR:
      x.innerHTML = "An unknown error occurred."
      break;
  }
}
    </script>    
</div>        
	</body>
	
	
</html>